#CMake top level file for project 'InFER'
project(infer-theileria)

cmake_minimum_required(VERSION 2.8)
set(CMAKE_MODULE_PATH ${infer-theileria_SOURCE_DIR}/cmake/Modules ${CMAKE_MODULE_PATH})

set(CMAKE_VERBOSE_MAKEFILE true)
### VERSION INFO ###
set(PACKAGE_NAME infer-theileria)
set(VERSION_MAJOR 0)
set(VERSION_MINOR 7)

# Get Git version
find_package(Git)

execute_process(COMMAND ${GIT_EXECUTABLE} log -1 --oneline 
			    WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR} 
			    OUTPUT_VARIABLE GITCOMMIT )
			 
string( REGEX REPLACE "^([^ ]+).*" "\\1" VERSION_PATCH "${GITCOMMIT}")

#####################



find_package(CUDA REQUIRED)
find_package(Boost 1.47.0 REQUIRED)
find_package(GSL REQUIRED)

#set(CMAKE_CXX_FLAGS ${CMAKE_CXX_FLAGS} "-std=gnu++0x")

set(LIBS ${LIBS} ${GSL_LIBRARIES} ${GSL_CBLAS_LIBRARIES})

configure_file(${CMAKE_SOURCE_DIR}/config.h.in ${CMAKE_BINARY_DIR}/config.h @ONLY)

install(PROGRAMS ${CMAKE_BINARY_DIR}/src/unitTests/fmdMcmc DESTINATION bin)
# ${CMAKE_BINARY_DIR}/src/unitTests/fmdSim DESTINATION bin)


add_subdirectory(src)
